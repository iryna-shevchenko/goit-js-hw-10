{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  daysEl: document.querySelector('[data-days]'),\n  hoursEl: document.querySelector('[data-hours]'),\n  minutesEl: document.querySelector('[data-minutes]'),\n  secondsEl: document.querySelector('[data-seconds]'),\n  startBtn: document.querySelector('[data-start]'),\n  datePicker: document.querySelector('#datetime-picker'),\n};\n\nrefs.startBtn.disabled = true;\nlet endDate = null;\n\nflatpickr(refs.datePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n\n    if (selectedDate.getTime() < new Date().getTime()) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Error!',\n        message: 'Please choose a date in the future',\n      });\n      refs.startBtn.disabled = true;\n      return;\n    }\n\n    iziToast.success({\n      position: 'topRight',\n      title: 'Success!',\n      message: `It's valide date, click on \"Start\"`,\n    });\n\n    endDate = selectedDate;\n    refs.startBtn.disabled = false;\n  },\n});\n\nrefs.startBtn.addEventListener('click', onclick);\n\nfunction onclick() {\n  refs.startBtn.disabled = true;\n\n  const timer = setInterval(() => {\n    const resultDate = selectDate();\n\n    if (resultDate <= 0) {\n      clearInterval(timer);\n      refs.daysEl.textContent = '00';\n      refs.hoursEl.textContent = '00';\n      refs.minutesEl.textContent = '00';\n      refs.secondsEl.textContent = '00';\n      return;\n    }\n\n    const datatimeComponents = convertMs(resultDate);\n\n    return clockInterface(datatimeComponents);\n  }, 1000);\n}\n\nfunction selectDate() {\n  const now = Date.now();\n  const distance = endDate.getTime() - now;\n\n  return distance < 0 ? 0 : distance;\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction clockInterface({ days, hours, minutes, seconds }) {\n  refs.daysEl.textContent = days;\n  refs.hoursEl.textContent = hours;\n  refs.minutesEl.textContent = minutes;\n  refs.secondsEl.textContent = seconds;\n}"],"names":["refs","endDate","flatpickr","selectedDates","selectedDate","iziToast","onclick","timer","resultDate","selectDate","datatimeComponents","convertMs","clockInterface","now","distance","ms","days","addLeadingZero","hours","minutes","seconds","value"],"mappings":"+IAQA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,gBAAgB,EAClD,UAAW,SAAS,cAAc,gBAAgB,EAClD,SAAU,SAAS,cAAc,cAAc,EAC/C,WAAY,SAAS,cAAc,kBAAkB,CACvD,EAEAA,EAAK,SAAS,SAAW,GACzB,IAAIC,EAAU,KAEdC,EAAUF,EAAK,WAAY,CACzB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQG,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAEpC,GAAIC,EAAa,QAAS,EAAG,IAAI,KAAM,EAAC,QAAO,EAAI,CACjDC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,SACP,QAAS,oCACjB,CAAO,EACDL,EAAK,SAAS,SAAW,GACzB,MACD,CAEDK,EAAS,QAAQ,CACf,SAAU,WACV,MAAO,WACP,QAAS,oCACf,CAAK,EAEDJ,EAAUG,EACVJ,EAAK,SAAS,SAAW,EAC1B,CACH,CAAC,EAEDA,EAAK,SAAS,iBAAiB,QAASM,CAAO,EAE/C,SAASA,GAAU,CACjBN,EAAK,SAAS,SAAW,GAEzB,MAAMO,EAAQ,YAAY,IAAM,CAC9B,MAAMC,EAAaC,IAEnB,GAAID,GAAc,EAAG,CACnB,cAAcD,CAAK,EACnBP,EAAK,OAAO,YAAc,KAC1BA,EAAK,QAAQ,YAAc,KAC3BA,EAAK,UAAU,YAAc,KAC7BA,EAAK,UAAU,YAAc,KAC7B,MACD,CAED,MAAMU,EAAqBC,EAAUH,CAAU,EAE/C,OAAOI,EAAeF,CAAkB,CACzC,EAAE,GAAI,CACT,CAEA,SAASD,GAAa,CACpB,MAAMI,EAAM,KAAK,MACXC,EAAWb,EAAQ,QAAO,EAAKY,EAErC,OAAOC,EAAW,EAAI,EAAIA,CAC5B,CAEA,SAASH,EAAUI,EAAI,CAMrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAC1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAAST,EAAe,CAAE,KAAAI,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACzDpB,EAAK,OAAO,YAAcgB,EAC1BhB,EAAK,QAAQ,YAAckB,EAC3BlB,EAAK,UAAU,YAAcmB,EAC7BnB,EAAK,UAAU,YAAcoB,CAC/B"}